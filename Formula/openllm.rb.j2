# Generated by {{ __cmd__ }}. DO NOT EDIT!
# Please refers to the original template file {{ __template_file__ }}
# vim: set ft=ruby:
class Openllm < Formula
  desc "{{ name }}: {{ description }}"
  homepage "{{ html_url }}"
  version "{{ __tag__|replace('v', '') }}"
  license "{{ license["spdx_id"] }}"
  head "{{ html_url }}, branch: {{ default_branch }}"
  url "{{ determine_release_url(svn_url, __tag__, 'archive') }}"
  sha256 "{{ shadict['archive'] }}"

  on_linux do
    url "{{ determine_release_url(svn_url, __tag__, 'linux_intel') }}"
    sha256 "{{ shadict['linux_intel'] }}"
  end
  on_macos do
    on_arm do
      url "{{ determine_release_url(svn_url, __tag__, 'macos_arm') }}"
      sha256 "{{ shadict['macos_arm'] }}"
    end
    on_intel do
      url "{{ determine_release_url(svn_url, __tag__, 'macos_intel') }}"
      sha256 "{{ shadict['macos_intel'] }}"
    end
  end

  def install
    on_linux do
      bin.install "openllm-{{ __tag__|replace('v', '') }}-{{ __gz_extension__['linux_intel'] }}" => "openllm"
    end
  on_macos do
    on_arm do
      bin.install "openllm-{{ __tag__|replace('v', '') }}-{{ __gz_extension__['macos_arm'] }}" => "openllm"
    end
    on_intel do
      bin.install "openllm-{{ __tag__|replace('v', '') }}-{{ __gz_extension__['macos_intel'] }}" => "openllm"
    end
  end
    ohai "To get started, run: 'openllm --help'"
    ohai "To see supported models, run: 'openllm models'"
  end

  test do
    shell_output "#{bin}/openllm --version"
  end
end
